<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Account creation</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        <link rel="apple-touch-icon" sizes="180x180" href="https://alassane-traore.github.io/your-ClasS/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://alassane-traore.github.io/your-ClasS/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://alassane-traore.github.io/your-ClasS/favicon-16x16.png">
<link rel="manifest" href="https://alassane-traore.github.io/your-ClasS/site.webmanifest">
<link rel="mask-icon" href="https://alassane-traore.github.io/your-ClasS/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="https://alassane-traore.github.io/your-ClasS/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="https://alassane-traore.github.io/your-ClasS/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
    </head>
<body id="regbody">
    <script src="./index.js"></script>
    <h1 id="regisWelcome"> <strong> ClasS!</strong></h1>
    <h4> Kindly fill the registration form to create an institution Account! </h4>  
    <form action="" method="post">

            <div>
                <ul>

                    <li>
                        <h1 id="chair"> Institution representative </h1>
                    </li>
                </ul>
                    
                
                
                <label for="Name" >Name</label>
                <input type="text" id="Name" placeholder="Firstname LASTNAME"> 
                <label for="Title"> Title </label>
                <input type="text" id="title" placeholder=" academic Title" > <br> <br>
                <label for=" Email">Email</label>
                <input type="email" name="Email" id="Email" placeholder="Your Email Address"> 
                <label for="telephone">Telephone</label>
                <input type="number" name="telephone" id="telephone">

            </div>
        
            
            <div>
                <ul>
                    <li>
                        <h1> Institution  </h1>
                    </li>
                </ul>
                <label for="instname"> Institution Name</label>
                <input type="text" id="InstName" placeholder="Institution Fullame"> <br> <br>
                <label for="Address"> Address </label>
                <input type="text" id="Instaddress" placeholder="Physical address" > <br> <br>
                <label for="Email"> Email</label>
                <input type="email" name="instemail" id="Instemail"> <br> <br>
                <span>
                   <div>
                       <label for="inChargeK" class="inchargeKLab" > Keys for Perons in Charge(separated with commas) </label>    
                    <label for="inCharge" class="inCharge"> List of Persons in Charge(separated with commas) </label>    
                    
                    <textarea name="" id="inChargeK"  cols="39" rows="7"></textarea>
                <textarea name="" id="inCharge" cols="37" rows="7"></textarea>
                        
                    
                   </div>
<br> <br>
                   <div>
                    <label for="students Keys" class="stkey" id="Keys"> Students Keys separated with commas </label> 
                    <label for="student List" class="Stlist" > Complete Student List (names separated with commas) </label>
                    <br>
                    <textarea name="" id="stkey" cols="39" rows="9">

                    </textarea>
                     
                     
                        <textarea name="Stlist" id="Stlist" cols="41" rows="9"  >
    
                    </textarea> 
                
                     
                    

                   </div>

                </span>
                <br> <br>
                <label  for="day"> Date</label>
                <input  type="datetime-local" name="day" id="day" placeholder="registration date" > <br> <br>
                <label   for="Password">Password</label>
                <input   type="password" name="Password" id="Password" placeholder="create Password" > 

            </div>
                <br> 
           <li class="rebatom" >
            <a ><input id ="submitAccounte" type="submit"></a>
           </li>
        
    </form>


    <script>


      //  let institutions = [];

    //function addInstitution(){
      //  let accounteEvent = document.getElementById('submitAccounte')
        // event.preventDefault();   
        //let newInstitution = {
       // institutionChair:
       // { id:Date.now,
         //   chairName : document.getElementById('Name').value,
    //chairTitle: document.getElementById('title').value,
    //chairMail : document.getElementById('Email').value,
    //chairPhone : document.getElementById("telephone").value
//},
//Institution:{
  //  id:Date.now,
//institutionName : document.getElementById('InstName').value,
//institutionAddress: document.getElementById("Instaddress").value,
//institutionMail:document.getElementById("Instemail").value,
//Members :  {id:Date.now,
  //  memberNames : document.getElementById("Stlist").value,
   //memberKeys: document.getElementById("stkey").value
//},
//inscriptionDay :document.getElementById("day").value,
//accountePass : document.getElementById("Password").value

//}
    // }

       // institutions.push(newInstitution);
       // document.forms[0].reset();
    
       // let NameOfInstitution = document.getElementById('InstName').value
       // localStorage.setItem( `${NameOfInstitution}`, JSON.stringify(institutions));
        //console.log(institutions);
    //}
</script>
<script src="./app.js"></script>


      
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBmc_KqjvSyDz9QLnveB4GasIYGwe2V-34",
      authDomain: "power-class.firebaseapp.com",
      databaseURL: "https://power-class-default-rtdb.firebaseio.com",
      projectId: "power-class",
      storageBucket: "power-class.appspot.com",
      messagingSenderId: "102798294958",
      appId: "1:102798294958:web:6db01ad48a8ca6fe5e523f",
      measurementId: "G-4RZHYSJDCM"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    import{getFirestore, doc, getDoc, setDoc, collection, addDoc, updateDoc, deleteDoc, deleteField , where, query,getDocs
}
from "https://www.gstatic.com/firebasejs/9.10.0/firebase-firestore.js"


// Initialize Cloud Firestore and get a reference to the service
const db = getFirestore();

const institutionName = document.getElementById('InstName');
const chair = document.getElementById('Name');
const chairTitle = document.getElementById('title');
const chairMail =  document.getElementById('Email');
const chairPhone = document.getElementById("telephone");
const institutionAddress= document.getElementById("Instaddress");
const institutionMail = document.getElementById("Instemail");
const studentsNames = document.getElementById("Stlist");
const studentsKeys = document.getElementById("stkey");
const studentsRepr = document.getElementById("inCharge"); 
const studentsReprkeys = document.getElementById('inChargeK');
const inscriptionDay  = document.getElementById("day");
const accountePass = document.getElementById("Password");
const accounteCreationButton = document.getElementById('submitAccounte');


accounteCreationButton.addEventListener('click',
async function addnewInstitution_customID(e) {
e.preventDefault();

var ref = doc (db,"Institutions",institutionName.value );
const docRef = await setDoc(
ref,
{ chair: `${chairTitle.value} ${chair.value}`,
chairMail : chairMail.value,
chairPhone : chairPhone.value,
institutionName : institutionName.value,
institutionAddress: institutionAddress.value,
institutionMail:institutionMail.value,
studentsRepresentatives: `${studentsRepr.value},${studentsReprkeys.value}`,
students:`${studentsNames.value},${studentsKeys.value}`,
inscriptionDay :document.getElementById("day").value,
accountePass : document.getElementById("Password").value  


}
)
.then(()=>
alert('accounte creation was successfull!')
)
.catch((error)=>
alert('accounte creation failed'+ error)
)


}

)



  </script>



<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>



<script src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"> </script>

<script>


let config = {
  enableTime: true,
    dateFormat: "Y-m-d H:i",

    minDate: "today",
    maxDate:new Date().fp_incr(1),
    parseDate: (datestr, format) => {
    return moment(datestr, format, true).toDate()}
    //altInput: true,
    //altFormat: "F j, Y",
    //dateFormat: "Y-m-d",
   
}




flatpickr("input[type = datetime-local]", config
);



</script>




   
</body>

</html>
